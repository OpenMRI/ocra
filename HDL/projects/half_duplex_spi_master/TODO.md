Important issues remaining on this core
- [x] Reading doesn't shift into correct bits (off by one) (done)
- [x] To fabric FIFO transfer does not finish due to possible reset (done)
- [ ] Asserts in test bench (not done)
- [x] correct bit-lengths for transaction length and bit counters (done)
- [x] remove dual clock approach and replace with simple single clock (done)
- [x] make a separate module with built-in clock-divider for the verilator tests (done)
- [ ] check all the reset conditions (not done)
- [x] fix the input shift register shifts when writing out (done)
- [x] make sure SPI modes cannot be changed in the middle of transactions etc (done)
- [ ] remove unnecessary registers (not done)
- [ ] check for unnecessary priority encoders (not done)
- [ ] change the state machine to follow standard pattern (not done)
- [ ] implement and test error detection (not done)
- [ ] bring a busy flag to the fabric domain using a double flop synchronizer (not done)
- [x] rewrite to use a FSM running on double clock speed to only have positive edge sensitivity (not done)
- [ ] rewrite logic so that for sure only 1 read value is written to the fabric fifo (not done)